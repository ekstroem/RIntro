<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 2 Introduktion til R | Introduktion til R</title>
  <meta name="description" content="<p>Denne “bog” indeholder en introduktion til R og omfatter et kapitel fra en kommende dansk statistikbog. Kommentarer, forslag og ændringer modtages meget gerne.
Kapitlet vil blive lagt online til fri afbenyttelse.</p>" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 2 Introduktion til R | Introduktion til R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://github.com/ekstroem/RIntro/blob/4b56d9c2d0f91ed08df39c9ddbb88f058b5aca14/pics/fakecover.png" />
  <meta property="og:description" content="<p>Denne “bog” indeholder en introduktion til R og omfatter et kapitel fra en kommende dansk statistikbog. Kommentarer, forslag og ændringer modtages meget gerne.
Kapitlet vil blive lagt online til fri afbenyttelse.</p>" />
  <meta name="github-repo" content="ekstroem/RIntro" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 2 Introduktion til R | Introduktion til R" />
  
  <meta name="twitter:description" content="<p>Denne “bog” indeholder en introduktion til R og omfatter et kapitel fra en kommende dansk statistikbog. Kommentarer, forslag og ændringer modtages meget gerne.
Kapitlet vil blive lagt online til fri afbenyttelse.</p>" />
  <meta name="twitter:image" content="https://github.com/ekstroem/RIntro/blob/4b56d9c2d0f91ed08df39c9ddbb88f058b5aca14/pics/fakecover.png" />

<meta name="author" content="Claus Thorn Ekstrøm" />


<meta name="date" content="2022-08-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="referencer.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduktion til R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> url: your book url like <span>https://bookdown.org/yihui/bookdown</span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#du-kan-hjælpe-til"><i class="fa fa-check"></i><b>1.1</b> Du kan hjælpe til</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Rintro.html"><a href="Rintro.html"><i class="fa fa-check"></i><b>2</b> Introduktion til R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Rintro.html"><a href="Rintro.html#rstudio"><i class="fa fa-check"></i><b>2.1</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="Rintro.html"><a href="Rintro.html#tricks-når-man-arbejder-med-r"><i class="fa fa-check"></i><b>2.1.1</b> Tricks når man arbejder med R</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="Rintro.html"><a href="Rintro.html#Rpakker"><i class="fa fa-check"></i><b>2.2</b> Installation og brug af pakker</a></li>
<li class="chapter" data-level="2.3" data-path="Rintro.html"><a href="Rintro.html#R-lommeregner"><i class="fa fa-check"></i><b>2.3</b> R som lommeregner</a></li>
<li class="chapter" data-level="2.4" data-path="Rintro.html"><a href="Rintro.html#R-vector"><i class="fa fa-check"></i><b>2.4</b> Vektorer</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="Rintro.html"><a href="Rintro.html#indicering-i-vektorer"><i class="fa fa-check"></i><b>2.4.1</b> Indicering i vektorer</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Rintro.html"><a href="Rintro.html#R-dataframes"><i class="fa fa-check"></i><b>2.5</b> Data frames</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="Rintro.html"><a href="Rintro.html#indicering-i-data-frames"><i class="fa fa-check"></i><b>2.5.1</b> Indicering i data frames</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="Rintro.html"><a href="Rintro.html#R-matricer"><i class="fa fa-check"></i><b>2.6</b> Tabeller og matricer</a></li>
<li class="chapter" data-level="2.7" data-path="Rintro.html"><a href="Rintro.html#import-af-data"><i class="fa fa-check"></i><b>2.7</b> Import af data</a></li>
<li class="chapter" data-level="2.8" data-path="Rintro.html"><a href="Rintro.html#tidyverse"><i class="fa fa-check"></i><b>2.8</b> Databehandling med tidyverse</a></li>
<li class="chapter" data-level="2.9" data-path="Rintro.html"><a href="Rintro.html#opgaver"><i class="fa fa-check"></i><b>2.9</b> Opgaver</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referencer.html"><a href="referencer.html"><i class="fa fa-check"></i>Referencer</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduktion til R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Rintro" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Kapitel 2</span> Introduktion til R<a href="Rintro.html#Rintro" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>R er et program og programmeringssprog designet til statistiske
udregninger og grafik.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> Vi bruger R, fordi det er <em>de
facto</em> standarden indenfor statistisk software, fordi det er et af de
stærkeste statistiske analyseværktøjer på markedet, fordi det gør det
let at reproducere sine resultater, og fordi R nyder godt af et stort
og dynamisk brugermiljø. Det betyder, at mange nyudviklede
visualiserings- og analysemetoder publiceres med kode til R, så alle
brugere kan anvende disse nye metoder uden at skulle programmere dem
selv.</p>
<p><img src="pics/Rlogo.png" width="362" /></p>
<div id="rstudio" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> RStudio<a href="Rintro.html#rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R fungerer ved at skrive kommandoer, som efterfølgende udføres. Det
anbefales at bruge en editor som RStudio til at skrive og holde styr
på programmerne, lave reproducerbar forskning, håndtere grafik og vise
Rs hjælpesider. Når både R og RStudio er installeret, er det kun
nødvendigt at starte RStudio.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>RStudio er opdelt i fire mindre vinduer (figur
<a href="Rintro.html#fig:rstudio-ide">2.1</a>). Øverste venstre vindue er en teksteditor,
hvor R programmerne skrives.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> Kommandoerne i editoren
udføres først, når man trykker “Run” på menubjælken (så bliver alle
kommandoerne i editoren udført i rækkefølge), eller alternativt vil
( på Mac) udføre
kodelinjen, som cursoren står på i editoren. Markeres flere linjer
sendes de alle til R og eksekveres i rækkefølge.</p>
<div class="figure"><span style="display:block;" id="fig:rstudio-ide"></span>
<img src="pics/rstudio-boxes.png" alt="RStudios brugergrænseflade er inddelt i 4 mindre vinduer: Øverst til venstre findes editoren, hvor man kan skrive, gemme og hente sit R program. Nederst til venstre er konsollen, hvor man har direte adgang til R, og hvor resultatet af udregningerne vises. Øverst til højre vises det nuværende workspace og historikken, og nederst til højre findes en filoversigt, og det er også her grafik, figurer og hjælpesider bliver vist." width="100%" />
<p class="caption">
Figure 2.1: RStudios brugergrænseflade er inddelt i 4 mindre vinduer: Øverst til venstre findes editoren, hvor man kan skrive, gemme og hente sit R program. Nederst til venstre er konsollen, hvor man har direte adgang til R, og hvor resultatet af udregningerne vises. Øverst til højre vises det nuværende workspace og historikken, og nederst til højre findes en filoversigt, og det er også her grafik, figurer og hjælpesider bliver vist.
</p>
</div>
<p>I nederste venstre vindue af RStudio findes konsollen, hvor selve R
kører. Her vises resultatet af udregningerne. Når kommandoer
overføres fra editorvinduet som beskrevet ovenfor, så bliver de i
praksis kopieret ned i konsollen og kørt linje for linje.</p>
<p>Øverste højre vindue viser Rs workspace — en oversigt over
objekterne i Rs hukommelse. Fanebladet “History” viser historikken
over alle de kommandoer, der hidtil har været kørt. Markeres en eller
flere af linjerne i historikken så sendes de til konsollen og bliver
kørt igen, hvis der dobbeltklikkes på dem. Det er muligt at gemme hele
historikken i en fil, så man den vej igennem kan dokumentere og
genskabe de kommandoer, der har været kørt.</p>
<p>Grafik bliver vist nederst til højre. Herfra er det muligt at
eksportere figurer, så de kan anvendes i andre programmer. Det er også
her, at Rs hjælpesider vises, og hvor en filoversigt over Rs
arbejdsbibliotek kan ses.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<div id="tricks-når-man-arbejder-med-r" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Tricks når man arbejder med R<a href="Rintro.html#tricks-når-man-arbejder-med-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Der er en række tricks, der er værd at kende til i arbejdet med R.</p>
<ul>
<li><p>I konsollen viser R en prompt, <code>&gt;</code>, når programmet er klar til at
modtage kommandoer. Får man ikke færdiggjort en selvstændig kommando skifter
prompten til <code>+</code>, og det er muligt at færdiggøre ordren.
afbryder indtastningen og man kommer tilbage til <code>&gt;</code>.</p></li>
<li><p>I konsollen bladrer og op
og ned i gamle kommandoer. Dermed kan det undgås at skulle skrive
gamle kommandoer helt forfra.</p></li>
<li><p>Funktioner i R angives altid med parenteser og har formen
<code>funktionsnavn(argument1, argument2, ...)</code>, hvor det er muligt at
give nul eller flere argumenter afhængigt af den konkrete
funktion. På den måde kan man altid skelne mellem almindelige
objekter (uden parentes) og funktioner.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p></li>
<li><p>RStudio har “auto-completion”: når man
starter med at taste i editoren eller konsollen foreslår RStudio,
hvad der kunne stå. Trykkes færdiggør RStudio resten
af navnet på objektet/funktionen.</p></li>
</ul>
</div>
</div>
<div id="Rpakker" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Installation og brug af pakker<a href="Rintro.html#Rpakker" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Der findes mere end 15000 pakker, som udvider R med nye funktioner og
datasæt. I RStudio installeres nye pakker via menupunktet <code>Tools &gt; Install Packages</code> (se figur <a href="Rintro.html#fig:rstudio-install-packages">2.2</a>, hvor
pakken <code>isdals</code> installeres). Alternativt kan en pakke installeres
direkte med funktionen <code>install.packages()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="Rintro.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;isdals&quot;</span>)   <span class="co"># Installér pakken isdals</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:rstudio-install-packages"></span>
<img src="pics/rstudio-install-packages.png" alt="Installation af nye pakker gennem RStudios brugergrænseflade foregår via menupunktet `Tools &gt; Install Packages`. Her installeres pakken `isdals` fra CRAN, der er Rs officielle netværk af tilgængelige pakker." width="80%" />
<p class="caption">
Figure 2.2: Installation af nye pakker gennem RStudios brugergrænseflade foregår via menupunktet <code>Tools &gt; Install Packages</code>. Her installeres pakken <code>isdals</code> fra CRAN, der er Rs officielle netværk af tilgængelige pakker.
</p>
</div>
<p>Det er kun nødvendigt at installere en pakke én gang. For at <em>bruge</em>
funktionerne eller datasættene fra en pakke skal den indlæses, hvilket
gøres med</p>
<p>For at spare på computerens hukommelse indlæses installerede pakker
kun, når brugeren ønsker det. Indlæsningen foregår med kommandoen
<code>library()</code>, hvilket er nødvendigt hver gang R startes op, hvis den
pågældende pakke skal bruges.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="Rintro.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Få adgang til data og funktioner fra pakken isdals</span></span>
<span id="cb2-2"><a href="Rintro.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;isdals&quot;</span>)</span></code></pre></div>
<p>Datasæt gøres tilgængelige med kommandoen <code>data()</code>. Hvis data ligger
i en pakke skal pakken først indlæses ved hjælp af <code>library()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="Rintro.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(isdals) <span class="co"># Hent pakken isdals</span></span>
<span id="cb3-2"><a href="Rintro.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(aids)      <span class="co"># Indlæs datasættet aids</span></span>
<span id="cb3-3"><a href="Rintro.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(aids)      <span class="co"># Vis de første 6 linjer</span></span></code></pre></div>
<pre><code>##   year cases deaths
## 1 1981   339    130
## 2 1982  1201    466
## 3 1983  3153   1511
## 4 1984  6368   3526
## 5 1985 12044   6996
## 6 1986 19404  12183</code></pre>
</div>
<div id="R-lommeregner" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> R som lommeregner<a href="Rintro.html#R-lommeregner" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R fungerer som en helt almindelig lommeregner. Tastes et regneudtryk
ind i editoren (øverste venstre vindue), hvorefter det markeres så vil
( på Mac) automatisk
kopiere koden ned i konsollen og køre den.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="Rintro.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">5</span>   <span class="co"># Alt efter # er en kommentar: udregn 1 + 5</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Svaret på 5+1 aflæses til
6.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> De fire almindelige regnearter: <code>+</code>, <code>-</code>, <code>*</code> og <code>/</code> fungerer som
normalt ligesom <code>^</code> (opløftning i potens) samt naturligvis
parenteser.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="Rintro.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="dv">5</span>) <span class="sc">/</span> (<span class="dv">4</span> <span class="sc">+</span> <span class="dv">2</span><span class="sc">^</span><span class="dv">2</span>)   <span class="co"># Langt regneudtryk</span></span></code></pre></div>
<pre><code>## [1] 2.25</code></pre>
<p>Udregningen af <span class="math inline">\(\frac{3\cdot(1+5)}{4 + 2^2}\)</span> er 2.25.</p>
<p>Resultatet kan gemmes i et objekt, så det kan
genbruges. R bruger “pilen” <code>&lt;-</code> til at gemme et objekt.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> Navnet på det gemte objekt kan vælges næsten frit:
det skal dog starte med et bogstav og må ikke indeholde <code>+</code>, <code>-</code>, <code>*</code>,
<code>/</code>, <code>^</code>, <code>;</code>, <code>(</code>, <code>)</code> og komma.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="Rintro.html#cb9-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">5</span>   <span class="co"># Gem værdien 5 i variablen y</span></span>
<span id="cb9-2"><a href="Rintro.html#cb9-2" aria-hidden="true" tabindex="-1"></a>y        <span class="co"># Udskriv værdien af y</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="Rintro.html#cb11-1" aria-hidden="true" tabindex="-1"></a>y <span class="sc">*</span> <span class="dv">2</span>    <span class="co"># Udregn 2 * værdien af indholdet af y</span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Mere komplicerede matematiske operationer kan udregnes ved hjælp af funktionerne vist i tabel
<a href="Rintro.html#tab:mathfunctions">2.1</a>.</p>
<table>
<caption><span id="tab:mathfunctions">Table 2.1: </span> De mest almindelige matematiske funktioner i R.</caption>
<colgroup>
<col width="30%" />
<col width="35%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Funktion</th>
<th>Forklaring</th>
<th>Eksempel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>abs(x)</code></td>
<td>Numerisk (absolut) værdi</td>
<td><code>abs(-3) = 3</code></td>
</tr>
<tr class="even">
<td><code>sqrt(x)</code></td>
<td>Kvadratrod</td>
<td><code>sqrt(9) = 3</code></td>
</tr>
<tr class="odd">
<td><code>a^x</code></td>
<td><span class="math inline">\(a\)</span> i <span class="math inline">\(x\)</span>te potens</td>
<td><code>4^2 = 16</code></td>
</tr>
<tr class="even">
<td><code>log(x)</code></td>
<td>Naturlig logaritme</td>
<td><code>log(10) = 2.303</code></td>
</tr>
<tr class="odd">
<td><code>log10(x)</code></td>
<td>Titalslogaritme</td>
<td><code>log10(10) = 1</code></td>
</tr>
<tr class="even">
<td><code>log(x, base=2)</code></td>
<td>Totalslogaritme</td>
<td><code>log(10, base=2) = 3.322</code></td>
</tr>
<tr class="odd">
<td><code>exp(x)</code></td>
<td>Eksponentialfunktionen</td>
<td><code>exp(1) = 2.718</code></td>
</tr>
</tbody>
</table>
<p>R skelner mellem store og små bogstaver, så <code>Y</code> og <code>y</code> er to
forskellige objekter, hvilket kan give anledning til overraskelser.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="Rintro.html#cb13-1" aria-hidden="true" tabindex="-1"></a>Y        <span class="co"># Et ukendt objekt</span></span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;Y&#39; not found</code></pre>
<p>R indeholder en ret veludbygget dokumentation, og hjælpesiden til
en funktion eller et datasæt kan ses med
funktionen <code>help()</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="Rintro.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(sqrt)   <span class="co"># Hent hjælpesiden for funktionen sqrt</span></span></code></pre></div>
<p>Ovennævnte viser hjælpesiden for <code>sqrt()</code> og giver en grundig
forklaring af funktionen og dens tilhørende argumenter.</p>
<p>Kender man ikke navnet på den relevante R funktion, kan <code>help.search()</code> søge hjælpesiderne igennem.<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="Rintro.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help.search</span>(<span class="st">&quot;box plot&quot;</span>)   <span class="co"># Find funktioner om &quot;box plot&quot;</span></span></code></pre></div>
<p>Dette viser en liste over de funktioner, der omtaler “box
plot”. Forhåbentlig giver listen en ide om, hvilken R funktion, der
måtte være relevant.</p>
</div>
<div id="R-vector" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Vektorer<a href="Rintro.html#R-vector" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vektorer er en af Rs helt store styrker. En vektor er en samling
af elementer af samme type — eksempelvis tal eller tekst.</p>
<p>En vektor kan laves med funktionen <code>c()</code> (for
combine eller concatenate), der “klistrer” elementer sammen.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="Rintro.html#cb17-1" aria-hidden="true" tabindex="-1"></a>hojde <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.65</span>, <span class="fl">1.79</span>, <span class="fl">1.62</span>, <span class="fl">1.87</span>) <span class="co"># Højde for 4 patienter</span></span>
<span id="cb17-2"><a href="Rintro.html#cb17-2" aria-hidden="true" tabindex="-1"></a>hojde                              <span class="co"># Udskriv højderne</span></span></code></pre></div>
<pre><code>## [1] 1.65 1.79 1.62 1.87</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="Rintro.html#cb19-1" aria-hidden="true" tabindex="-1"></a>vaegt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">55.2</span>, <span class="fl">89.7</span>, <span class="fl">49.8</span>, <span class="fl">92.1</span>) <span class="co"># Vægt for samme 4 personer</span></span>
<span id="cb19-2"><a href="Rintro.html#cb19-2" aria-hidden="true" tabindex="-1"></a>vaegt                              <span class="co"># Udskriv vægtene</span></span></code></pre></div>
<pre><code>## [1] 55.2 89.7 49.8 92.1</code></pre>
<p>Fordelen ved vektorer er, at R kan lave samme udregning for hvert
enkelt element i vektoren. Body-mass index (BMI)<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>
for alle fire personer udregnes ved</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="Rintro.html#cb21-1" aria-hidden="true" tabindex="-1"></a>bmi <span class="ot">&lt;-</span> vaegt <span class="sc">/</span> (hojde<span class="sc">^</span><span class="dv">2</span>)   <span class="co"># Udregn BMI og gem som bmi</span></span>
<span id="cb21-2"><a href="Rintro.html#cb21-2" aria-hidden="true" tabindex="-1"></a>bmi                        <span class="co"># Udskriv bmi</span></span></code></pre></div>
<pre><code>## [1] 20.27548 27.99538 18.97577 26.33761</code></pre>
<p>hvilket direkte giver resultaterne for alle fire patienter. Bemærk, at
R regner elementvis, så det første element i <code>hojde</code> bruges sammen med
det første element i <code>vaegt</code> og så videre. Rækkefølgen på målingerne
er altså vigtig og skal passe sammen.</p>
<p>Hvis vektorerne i en udregning ikke har samme længde, så undersøger R
først, om længden af den korte vektor går op i længden af den lange
vektor. Hvis det er tilfældet bliver den korte vektor gentaget indtil
den har samme længde som den lange vektor.<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a> Hvis vi eksempelvis hellere ville have
målt højderne i cm i stedet for i meter så skal vi gange alle
værdierne med 100.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="Rintro.html#cb23-1" aria-hidden="true" tabindex="-1"></a>hojde <span class="sc">*</span> <span class="dv">100</span>   <span class="co"># Gang hver enkelt højdeværdi med 100</span></span></code></pre></div>
<pre><code>## [1] 165 179 162 187</code></pre>
<p>Denne udregning går godt, fordi <code>hojde</code> er en vektor af længde 4, og tallet
<code>100</code> opfattes om en vektor af længde 1. Da 1 går op i 4 gentages
værdien <code>100</code> 4 gange indtil de to vektorer er lige lange, og så arbejder R
elementvis igen.</p>
<p>Vektorer er især nyttige i kombination med de indbyggede matematiske
funktioner, da disse accepterer vektorer som input. For eksempel tager
<code>log()</code> den naturlige logaritme af hvert element i en vektor.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="Rintro.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(hojde)   <span class="co"># Tag logaritmen til hvert element i hojde</span></span></code></pre></div>
<pre><code>## [1] 0.5007753 0.5822156 0.4824261 0.6259384</code></pre>
<p>Nogle funktioner bruger hele vektoren til at udregne nye
resultater. Eksempelvis udregnes gennemsnittet af de fire personers
BMI ved at give vektoren til funktionen <code>mean()</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="Rintro.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(bmi)   <span class="co"># Udregn gennemsnittet af alle værdierne i bmi</span></span></code></pre></div>
<pre><code>## [1] 23.39606</code></pre>
<p>R deler outputtet op i flere linjer for lange lange vektorer, der ikke
kan udskrives på en enkelt linje. Input kan også splittes over flere
linjer. Så skifter Rs inputprompt midlertidigt fra <code>&gt;</code> til <code>+</code> så det
er tydeligt, at man skriver videre på linjen ovenfor.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="Rintro.html#cb29-1" aria-hidden="true" tabindex="-1"></a>langvektor <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>,</span>
<span id="cb29-2"><a href="Rintro.html#cb29-2" aria-hidden="true" tabindex="-1"></a>                <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">30</span>, <span class="dv">100</span>, <span class="dv">101</span>, </span>
<span id="cb29-3"><a href="Rintro.html#cb29-3" aria-hidden="true" tabindex="-1"></a>                <span class="dv">102</span>, <span class="dv">103</span>, <span class="dv">104</span>, <span class="dv">105</span>, <span class="dv">106</span>, <span class="dv">107</span>, <span class="dv">108</span>, <span class="dv">109</span>)</span>
<span id="cb29-4"><a href="Rintro.html#cb29-4" aria-hidden="true" tabindex="-1"></a>langvektor</span></code></pre></div>
<pre><code>##  [1]   1   3   5   7   9   2   4   6   8  10  20  21  22  23  24  25  26  27  28
## [20]  29  30 100 101 102 103 104 105 106 107 108 109</code></pre>
<p>Vektorer behøver ikke indeholde tal, men kan for eksempel også bestå af
tekst eller logiske værdier (sandt eller falsk — benævnt <code>TRUE</code> eller
<code>FALSE</code> i R).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="Rintro.html#cb31-1" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Bamse&quot;</span>, <span class="st">&quot;Kylling&quot;</span>, <span class="st">&quot;ælling&quot;</span>) <span class="co"># En vektor af tekst</span></span>
<span id="cb31-2"><a href="Rintro.html#cb31-2" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)           <span class="co"># En logisk vektor</span></span>
<span id="cb31-3"><a href="Rintro.html#cb31-3" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)                      <span class="co"># En vektor af tal</span></span>
<span id="cb31-4"><a href="Rintro.html#cb31-4" aria-hidden="true" tabindex="-1"></a>v2                                    <span class="co"># Udskriv v2</span></span></code></pre></div>
<pre><code>## [1] &quot;Bamse&quot;   &quot;Kylling&quot; &quot;ælling&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="Rintro.html#cb33-1" aria-hidden="true" tabindex="-1"></a>v3                                    <span class="co"># Udskriv v3</span></span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="Rintro.html#cb35-1" aria-hidden="true" tabindex="-1"></a>v4                                    <span class="co"># Udskriv v4</span></span></code></pre></div>
<pre><code>## [1] 1 2 5</code></pre>
<div id="indicering-i-vektorer" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Indicering i vektorer<a href="Rintro.html#indicering-i-vektorer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Der kan henvise til specifikke elementer i én vektor med en anden vektor med de relevante indices i skarpe parenteser.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="Rintro.html#cb37-1" aria-hidden="true" tabindex="-1"></a>v2[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]    <span class="co"># Udtræk element nummer 2 og 3 fra v2</span></span></code></pre></div>
<pre><code>## [1] &quot;Kylling&quot; &quot;ælling&quot;</code></pre>
<p>Indicering kan også bruges til at ændre specifikke elementer.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="Rintro.html#cb39-1" aria-hidden="true" tabindex="-1"></a>v2[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Ælling&quot;</span>   <span class="co"># Skift element 3 til at starte med stort</span></span>
<span id="cb39-2"><a href="Rintro.html#cb39-2" aria-hidden="true" tabindex="-1"></a>v2                  <span class="co"># Udskriv den nye v2</span></span></code></pre></div>
<pre><code>## [1] &quot;Bamse&quot;   &quot;Kylling&quot; &quot;Ælling&quot;</code></pre>
<p>Ved indicering kommer elementerne ud i den rækkefølge de bliver
refereret. Elementernes rækkefølge kan byttes rundt ved at
ændre rækkefølgen på indices.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="Rintro.html#cb41-1" aria-hidden="true" tabindex="-1"></a>v2[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)]      <span class="co"># Udskriv v2 i ny rækkefølge</span></span></code></pre></div>
<pre><code>## [1] &quot;Kylling&quot; &quot;Ælling&quot;  &quot;Bamse&quot;</code></pre>
<p>Bemærk at <code>v2</code> ikke ændres med ovennævnte kommando, da kommandoen blot
udskriver den vektor, hvor der er byttet rundt på
rækkefølgen. Resultatet skal gemmes, hvis det skal bruges i anden
sammenhæng:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="Rintro.html#cb43-1" aria-hidden="true" tabindex="-1"></a>v5 <span class="ot">&lt;-</span> v2[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)]  <span class="co"># Lav v5 med ny rækkefølge af v2</span></span>
<span id="cb43-2"><a href="Rintro.html#cb43-2" aria-hidden="true" tabindex="-1"></a>v5</span></code></pre></div>
<pre><code>## [1] &quot;Kylling&quot; &quot;Ælling&quot;  &quot;Bamse&quot;</code></pre>
<p>En logisk vektor af samme længde som den oprindelige vektor kan også
bruges som indeks. Så udvælges netop de elementer, hvor den logiske
vektor er sand.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="Rintro.html#cb45-1" aria-hidden="true" tabindex="-1"></a>v2[v3]   <span class="co"># Udskriv de elementer i v2, hvor v3 er sand</span></span></code></pre></div>
<pre><code>## [1] &quot;Bamse&quot;</code></pre>
<p>Denne funktionalitet er ekstra nyttig, hvis man gerne vil udvælge
elementer på baggrund af værdierne i en anden vektor.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="Rintro.html#cb47-1" aria-hidden="true" tabindex="-1"></a>v2[v4 <span class="sc">&lt;</span> <span class="dv">5</span>]   <span class="co"># Vælg værdier af v2, hvor v4 er mindre end 5</span></span></code></pre></div>
<pre><code>## [1] &quot;Bamse&quot;   &quot;Kylling&quot;</code></pre>
<p>Element 1 og 2 er netop de tilfælde, hvor værdien af <code>v4</code> er mindre
end 5.</p>
<p>I R bruges en lidt speciel notation med <em>to</em> lighedstegn, når det skal
vurderes om to objekter er ens.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="Rintro.html#cb49-1" aria-hidden="true" tabindex="-1"></a>v2[v4<span class="sc">==</span><span class="dv">2</span>]  <span class="co"># Udvælg når v4 er 2. Bemærk to lighedstegn!</span></span></code></pre></div>
<pre><code>## [1] &quot;Kylling&quot;</code></pre>
</div>
</div>
<div id="R-dataframes" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Data frames<a href="Rintro.html#R-dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data frames er Rs betegnelse for et datasæt, der indeholder en samling af
vektorer (variablene i datasættet), der alle har samme længde.
En data frame laves ved at sætte vektorer af samme længde sammen ved
hjælp af funktionen <code>data.frame()</code>, og det er muligt at give vektorerne
nye navne, når datasættet laves.</p>
<div class="figure"><span style="display:block;" id="fig:rectdataframe"></span>
<img src="_main_files/figure-html/rectdataframe-1.png" alt="Man kan tænke på en data frame som et firkantet område af et regneark, hvor hver række svarer til en observation, en person eller en registrering, og hvor hver søjle svarer til en variabel." width="90%" />
<p class="caption">
Figure 2.3: Man kan tænke på en data frame som et firkantet område af et regneark, hvor hver række svarer til en observation, en person eller en registrering, og hvor hver søjle svarer til en variabel.
</p>
</div>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="Rintro.html#cb51-1" aria-hidden="true" tabindex="-1"></a>DF <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">navn=</span>v2,      <span class="co"># Lav data frame</span></span>
<span id="cb51-2"><a href="Rintro.html#cb51-2" aria-hidden="true" tabindex="-1"></a>                 bjørn<span class="ot">=</span>v3,     <span class="co"># Med tre variabel og</span></span>
<span id="cb51-3"><a href="Rintro.html#cb51-3" aria-hidden="true" tabindex="-1"></a>         v4)           <span class="co"># giv nye navne til to</span></span>
<span id="cb51-4"><a href="Rintro.html#cb51-4" aria-hidden="true" tabindex="-1"></a>DF                             <span class="co"># Udskriv data frame</span></span></code></pre></div>
<pre><code>##      navn bjørn v4
## 1   Bamse  TRUE  1
## 2 Kylling FALSE  2
## 3  Ælling FALSE  5</code></pre>
<p>Variablene i en data frame eksisterer kun inde i selve data
framen. Det er ret smart, for så kan samme variabelnavn benyttes i
flere forskellige data frames uden at de overskriver hinanden.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="Rintro.html#cb53-1" aria-hidden="true" tabindex="-1"></a>DF2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">navn=</span><span class="fu">c</span>(<span class="st">&quot;Palle&quot;</span>, <span class="st">&quot;Polle&quot;</span>, <span class="st">&quot;Ruth&quot;</span>),</span>
<span id="cb53-2"><a href="Rintro.html#cb53-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">v4=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb53-3"><a href="Rintro.html#cb53-3" aria-hidden="true" tabindex="-1"></a>DF2  <span class="co"># Udskriv data framen. Bemærk variablene navn og v4</span></span></code></pre></div>
<pre><code>##    navn v4
## 1 Palle  1
## 2 Polle  2
## 3  Ruth  3</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="Rintro.html#cb55-1" aria-hidden="true" tabindex="-1"></a>DF   <span class="co"># Den gamle data frame. Har også variablene navn og v4</span></span></code></pre></div>
<pre><code>##      navn bjørn v4
## 1   Bamse  TRUE  1
## 2 Kylling FALSE  2
## 3  Ælling FALSE  5</code></pre>
<p>Da variable i en data frame kun kan ses inde i den data frame, hvor de
er defineret, er det nødvendigt også at angive navnet på den relevante
data frame, når variablen benyttes i andre sammenhænge. Eksempelvis ved
R ikke, om variablen <code>v4</code> henviser til den pågældende variabel i <code>DF</code>,
eller <code>v4</code> fra <code>DF2</code>. Referencer til variable inde i en data frame
opnås ved at bruge <code>$</code> mellem navnet på data framen og
variablen.<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="Rintro.html#cb57-1" aria-hidden="true" tabindex="-1"></a>DF<span class="sc">$</span>v4    <span class="co"># Hent v4 fra DF</span></span></code></pre></div>
<pre><code>## [1] 1 2 5</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="Rintro.html#cb59-1" aria-hidden="true" tabindex="-1"></a>DF2<span class="sc">$</span>v4   <span class="co"># Hent v4 fra DF2</span></span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<p>Nye variable kan tilføjes til en eksisterende data frame ved bare at
definere nye variable. Eneste krav er, at nye variable skal have samme
længde som de øvrige variable.<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="Rintro.html#cb61-1" aria-hidden="true" tabindex="-1"></a>DF<span class="sc">$</span>sko <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ja&quot;</span>, <span class="st">&quot;nej&quot;</span>, <span class="st">&quot;nej&quot;</span>)  <span class="co"># Lav variabel sko i DF</span></span>
<span id="cb61-2"><a href="Rintro.html#cb61-2" aria-hidden="true" tabindex="-1"></a>DF</span></code></pre></div>
<pre><code>##      navn bjørn v4 sko
## 1   Bamse  TRUE  1  ja
## 2 Kylling FALSE  2 nej
## 3  Ælling FALSE  5 nej</code></pre>
<div id="indicering-i-data-frames" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Indicering i data frames<a href="Rintro.html#indicering-i-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data frames kan opfattes som firkantede regneark (se figur
<a href="Rintro.html#fig:rectdataframe">2.3</a>), og specifikke elementer kan refereres ved
at bruge to indices svarende til rækker og søjler.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="Rintro.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hent anden observation fra tredie variabel</span></span>
<span id="cb63-2"><a href="Rintro.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co"># svarende til række 2 søjle 3 i DF</span></span>
<span id="cb63-3"><a href="Rintro.html#cb63-3" aria-hidden="true" tabindex="-1"></a>DF[<span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Hele rækker og søjler udtrækkes ved at undlade at angive værdier
for henholdsvis søjler og rækker.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="Rintro.html#cb65-1" aria-hidden="true" tabindex="-1"></a>DF[<span class="dv">3</span>,]       <span class="co"># Hent hele række 3</span></span></code></pre></div>
<pre><code>##     navn bjørn v4 sko
## 3 Ælling FALSE  5 nej</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="Rintro.html#cb67-1" aria-hidden="true" tabindex="-1"></a>DF[,<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># Hent søjler 2 og 4</span></span></code></pre></div>
<pre><code>##   bjørn sko
## 1  TRUE  ja
## 2 FALSE nej
## 3 FALSE nej</code></pre>
<p>Ligesom for vektorer kan indicering bruges til at indsætte nye
værdier for enkeltobservationer, rækker eller søjler.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="Rintro.html#cb69-1" aria-hidden="true" tabindex="-1"></a>DF<span class="sc">$</span>v4[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">10</span>                 <span class="co"># Sæt første element af v4 i DF til 10</span></span>
<span id="cb69-2"><a href="Rintro.html#cb69-2" aria-hidden="true" tabindex="-1"></a>DF[,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="co"># Erstat hele 2. søjle</span></span>
<span id="cb69-3"><a href="Rintro.html#cb69-3" aria-hidden="true" tabindex="-1"></a>DF                             <span class="co"># Udskriv data framen</span></span></code></pre></div>
<pre><code>##      navn bjørn v4 sko
## 1   Bamse  TRUE 10  ja
## 2 Kylling  TRUE  2 nej
## 3  Ælling FALSE  5 nej</code></pre>
</div>
</div>
<div id="R-matricer" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Tabeller og matricer<a href="Rintro.html#R-matricer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En matrix er en “firkantet samling” af tal, hvilket kan bruges til at
repræsentere antalstabeller.<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a> I R laves matricer ved hjælp af <code>matrix()</code>, og
som input bruges en vektor af de tal, der skal fyldes ind i matricen,
og det ønskede antal rækker eller søjler.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="Rintro.html#cb71-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),  <span class="co"># Matrix med tallene 1 2 3 4 5 6 </span></span>
<span id="cb71-2"><a href="Rintro.html#cb71-2" aria-hidden="true" tabindex="-1"></a>            <span class="dv">2</span>)                    <span class="co"># Inddel i to rækker</span></span>
<span id="cb71-3"><a href="Rintro.html#cb71-3" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<p>Det sidste tal, 2, i kaldet til <code>matrix()</code> ovenfor bestemmer antallet
af rækker, som tallene skal fyldes ind i. Bemærk at matricen fyldes op
søjlevis.<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a> Hvis antallet af
rækker ikke går op i antallet af tal i vektoren, så genbruger R
vektoren indtil matricen er fyldt helt ud, og skriver en advarsel.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="Rintro.html#cb73-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="dv">2</span>) <span class="co"># Matrix med for få tal</span></span></code></pre></div>
<pre><code>## Warning in matrix(c(1, 2, 3, 4, 5), 2): data length [5] is not a sub-multiple or
## multiple of the number of rows [2]</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="Rintro.html#cb75-1" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    1</code></pre>
<p>De fem første elementer i matricen fyldes op med værdierne 1 til
5, hvorefter vektoren genbruges forfra. Sidste element er derfor 1.</p>
<p>Matricer indiceres på samme måde som data frames. Elementet i 1. række og 3. søjle er</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="Rintro.html#cb77-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">1</span>, <span class="dv">3</span>]      <span class="co"># Udskriv element fra 1. række, 3. søjle</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="Rintro.html#cb79-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="co"># Erstat element 1, 3</span></span>
<span id="cb79-2"><a href="Rintro.html#cb79-2" aria-hidden="true" tabindex="-1"></a>m            <span class="co"># Udskriv m</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    8
## [2,]    2    4    1</code></pre>
</div>
<div id="import-af-data" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Import af data<a href="Rintro.html#import-af-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R kan importere data direkte fra de fleste dataformater og -baser. De
simpleste formater kan indlæses direkte i R, mens mere komplicerede
dataformater kræver, at en relevant pakke er installeret (se tabel
<a href="Rintro.html#tab:importdata">2.2</a> for en oversigt).</p>
<p>Filnavnet angives som første argument, men indlæsningsfunktionerne i
tabel <a href="Rintro.html#tab:importdata">2.2</a> har lidt forskellige argumenter alt
afhængigt af dataformatet. Eksempelvis vil følgende kode indlæse
første ark fra Excelfilen <code>forsøgsdata.xlsx</code>.<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="Rintro.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;readxl&quot;</span>)     <span class="co"># Indlæs pakken readxl</span></span>
<span id="cb81-2"><a href="Rintro.html#cb81-2" aria-hidden="true" tabindex="-1"></a>minedata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;forsøgsdata.xlsx&quot;</span>, <span class="at">sheet=</span><span class="dv">1</span>)</span></code></pre></div>
<table>
<caption><span id="tab:importdata">Table 2.2: </span> Funktioner og pakker til import af de mest almindelige dataformater i R.</caption>
<colgroup>
<col width="48%" />
<col width="32%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>Filformat (typisk filnavn)</th>
<th>Funktion</th>
<th>Pakke</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Tekstfil (<code>.txt</code>)</td>
<td><code>read.table()</code></td>
<td></td>
</tr>
<tr class="even">
<td>CSV (<code>.csv</code>)</td>
<td><code>read.csv()</code> eller <code>read.csv2()</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Excel (<code>.xlsx</code> eller <code>.xls</code>)</td>
<td><code>read_excel()</code></td>
<td><code>readxl</code></td>
</tr>
<tr class="even">
<td>SPSS (<code>.sav</code> eller <code>.por</code>)</td>
<td><code>read_sav()</code> eller <code>read_por()</code></td>
<td><code>haven</code></td>
</tr>
<tr class="odd">
<td>SAS (<code>.sas7bdat</code>)</td>
<td><code>read_sas()</code></td>
<td><code>haven</code></td>
</tr>
<tr class="even">
<td>Stata (<code>.dta</code>)</td>
<td><code>read_stata()</code></td>
<td><code>haven</code></td>
</tr>
<tr class="odd">
<td>JSON (<code>.json</code>)</td>
<td><code>fromJSON()</code></td>
<td><code>jsonlite</code></td>
</tr>
</tbody>
</table>
<p>Hjælp til at importere en række almindelige tekstformater kan findes
direkte i RStudio via menupunktet <code>File &gt; Import Dataset</code>. Nedenfor
er vist indholdet af CSV-filen
<code>patienter.csv</code>.<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a></p>
<pre><code>Navn;Alder;Status;BMI;Kon
Jensen;61;1;31,4;M
Hansen;26;0;23;M
Petersen;77;0;28,3;K
Jørgensen;53;1;24,6;K</code></pre>
<div class="figure"><span style="display:block;" id="fig:rstudio-import-data"></span>
<img src="pics/rstudio-import-data2.png" alt="Import af data gennem RStudios `File &gt; Import Dataset &gt; From CSV`. Her importeres data fra tekstfilen `patienter.csv`, og nederst er markeret, at søjleadskiller er semikolon. Den lille dialogboks dukker op efter tryk på 'Configure', og her kan man sætte decimaladskiller. Vinduet 'Data preview' viser, hvordan R ser filen med de givne indstillinger, og at det ser fornuftigt ud. R finder de fire søjler med de korrekte formater." width="100%" />
<p class="caption">
Figure 2.4: Import af data gennem RStudios <code>File &gt; Import Dataset &gt; From CSV</code>. Her importeres data fra tekstfilen <code>patienter.csv</code>, og nederst er markeret, at søjleadskiller er semikolon. Den lille dialogboks dukker op efter tryk på ‘Configure’, og her kan man sætte decimaladskiller. Vinduet ‘Data preview’ viser, hvordan R ser filen med de givne indstillinger, og at det ser fornuftigt ud. R finder de fire søjler med de korrekte formater.
</p>
</div>
<p>Figur <a href="Rintro.html#fig:rstudio-import-data">2.4</a> viser dialogboksen, der
fremkommer, når man vælger <code>File &gt; Import Dataset &gt; From CSV</code>. Øverst
vælges den tekstfil, der skal indlæses, og nederst markeres, at
første linje i filen indeholder variabelnavnene (<code>First Row as Names</code>), og at variablene (søjlerne i filen) er adskilt med semikolon
(<code>Delimiter</code>).</p>
<p>Med knappen “Configure ..” fremkommer den lille dialogboks, og det angives, at decimaladskiller er komma (det bruges i
filen for variablen <code>BMI</code>) og ikke punktum, der er Rs almindelige
decimaladskiller.</p>
<p>Det store vindue “Data preview” viser, hvordan R ser den pågældende
fil med de givne indstillinger (figur <a href="Rintro.html#fig:rstudio-import-data">2.4</a>)
Her indlæses filen som fire søjler svarende til de fire
variable i den oprindelige fil, og <code>BMI</code> er korrekt
indlæst som en double (en numerisk variabel) med de korrekte værdier.
Hvis indlæsningsindstillingerne er sat forkert bliver det klart i
dette vindue.</p>
<p>Nederst til højre fremgår de kommandoer, som R kører
for at indlæse filen. Disse kommandoer bør kopieres over i editoren,
så datafilen automatisk indlæses korrekt en anden gang.<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a></p>
</div>
<div id="tidyverse" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Databehandling med tidyverse<a href="Rintro.html#tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data skal ofte tilpasses før de er klar til at blive
analyseret. Variable skal have det rigtige format, der skal laves nye
variabel, og datasættet skal måske omstruktureres. <code>tidyverse</code> er et
sæt af pakker til R, der gør databehandling meget lettere.</p>
<p>Funktionerne i <code>tidyverse</code> tager en data frame som første argument og
returnerer selv en data frame.<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a> Dermed kan funktionerne let
kombineres ved hjælp af operatoren <code>|&gt;</code>, der kæder resultaterne fra
flere kommandoer sammen: resultatet af den første funktion bliver
brugt som input til den næste funktion.<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a> Funktionerne i <code>tidyverse</code> har desuden den
fordel, at det ikke er nødvendigt at referere til variable inde i en data
frame med <code>$</code>. Tabel <a href="Rintro.html#tab:tidyversefunctions">2.3</a> viser de mest
almindelige funktioner.</p>
<div class="figure"><span style="display:block;" id="fig:pivot"></span>
<img src="/Users/ekstrom/ku/bog/statistik_for_medicinere/pics/pivot-figure.jpg" alt="tidyverse introducerer funktionerne, pivot\_longer() og pivot\_wider(), der er nyttige at kende til, men som vi ikke vil komme nærmere ind på her. Funktionerne kan omstrukturere datasæt fra &quot;wide format&quot;\  til &quot;long format&quot;\  eller den anden vej. &quot;Wide&quot;\  datasæt optræder typisk, når der er gentagne målinger på samme forsøgsenhed. Et &quot;long&quot;\  datasæt indeholder den samme information, men de gentagne registreringer er spredt ud over flere rækker. Mange analysemetoder i R kræver data i &quot;long&quot;\ format." width="100%" />
<p class="caption">
Figure 2.5: tidyverse introducerer funktionerne, pivot_longer() og pivot_wider(), der er nyttige at kende til, men som vi ikke vil komme nærmere ind på her. Funktionerne kan omstrukturere datasæt fra “wide format”  til “long format”  eller den anden vej. “Wide”  datasæt optræder typisk, når der er gentagne målinger på samme forsøgsenhed. Et “long”  datasæt indeholder den samme information, men de gentagne registreringer er spredt ud over flere rækker. Mange analysemetoder i R kræver data i “long” format.
</p>
</div>
<table>
<caption><span id="tab:tidyversefunctions">Table 2.3: </span> De mest almindelige funktioner til datahåndtering ved hjælp af <code>tidyverse</code>.</caption>
<colgroup>
<col width="30%" />
<col width="69%" />
</colgroup>
<thead>
<tr class="header">
<th>Funktion</th>
<th>Forklaring</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>arrange()</code></td>
<td>Sortér data</td>
</tr>
<tr class="even">
<td><code>fct_collapse()</code></td>
<td>Slå kategorier af en faktor sammen</td>
</tr>
<tr class="odd">
<td><code>filter()</code></td>
<td>Vælg observationer (rækker)</td>
</tr>
<tr class="even">
<td><code>group_by()</code></td>
<td>Split data op i undergrupper</td>
</tr>
<tr class="odd">
<td><code>mutate()</code></td>
<td>Ændre/lav nye variable</td>
</tr>
<tr class="even">
<td><code>pivot_longer()</code></td>
<td>Kombiner søjler, så datasættet bliver “langt”</td>
</tr>
<tr class="odd">
<td><code>pivot_wider()</code></td>
<td>Tag to søjler (navne og værdier) og gør data “bredt”</td>
</tr>
<tr class="even">
<td><code>pull()</code></td>
<td>Udtræk en variabel som en vektor</td>
</tr>
<tr class="odd">
<td><code>select()</code></td>
<td>Vælg søjler (variable)</td>
</tr>
<tr class="even">
<td><code>summarise()</code></td>
<td>Opsummere data ud fra grupper</td>
</tr>
<tr class="odd">
<td><code>ungroup()</code></td>
<td>Fjern undergrupper</td>
</tr>
</tbody>
</table>
<p>Som et eksempel på databehandling med <code>tidyverse</code> bruges et datasæt om
behandling af diastolisk blodtryk hos 10 forsøgsdeltagere. De er alle
målt to gange: ved forsøgsstart og efter 4 uger (variablene <code>start</code> og <code>4 uger</code>). Desuden er der en
række yderligere registreringer på forsøgsdeltagerne, hvilket
fremgår af datasættet i tabel <a href="#tab:tidyverseex1"><strong>??</strong></a>.<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a> Datasættet indeholder en
række fejl: der er en højde og en diastolisk blodtryksmåling ved
baseline, der er urealistiske, og desuden er værdierne af variablen
<code>køn</code> skrevet på lidt forskellig måde. Endelig skal der udregnes BMI,
som skal bruges til de efterfølgende analyser, og det skal sikres, at kategoriske variable opfattes som faktorer.</p>
<p>Vi bygger dataoprensningen trinvist op. Først bruges <code>filter()</code> til at
beholde individer (rækker i datasættet), der ikke har åbenlyst
forkerte værdier.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="Rintro.html#cb83-1" aria-hidden="true" tabindex="-1"></a>DF <span class="sc">|&gt;</span>                <span class="co"># Tag datasættet og behold rækker,</span></span>
<span id="cb83-2"><a href="Rintro.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(start<span class="sc">&gt;</span><span class="dv">0</span>,    <span class="co"># hvor baseline diastolisk er større</span></span>
<span id="cb83-3"><a href="Rintro.html#cb83-3" aria-hidden="true" tabindex="-1"></a>         hojde<span class="sc">&gt;</span><span class="dv">120</span>)  <span class="co"># end 0 og højde er større end 120</span></span></code></pre></div>
<pre><code>##   alder    køn diab behandling hojde vaegt start 4 uger
## 1    70   mand  nej         ny   177    96    99     81
## 2    52   mand  nej     gammel   180    97   104     93
## 3    46   Mand  nej     gammel   187    93    94     86
## 4    47   mand  nej     gammel   185    93    97     91
## 5    74 kvinde  nej     gammel   162    66   103     90
## 6    68 kvinde  nej     gammel   161    59   103     90
## 7    56 KVINDE   ja         ny   168    69   102     81
## 8    59 kvinde   ja     gammel   167    70    96     86</code></pre>
<p>På nuværende tidspunkt er det filtrerede datasæt ikke gemt. Det gøres først til sidst, så det er muligt at se resultaterne undervejs.</p>
<p><code>mutate()</code> omkoder eksisterende variable eller laver nye. Først laves en ny variabel <code>bmi</code> ud fra <code>vaegt</code> og <code>hojde</code>, og koden til det er</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="Rintro.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definer ny variabel bmi</span></span>
<span id="cb85-2"><a href="Rintro.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">bmi =</span> vaegt <span class="sc">/</span> (hojde<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<p>Så tilpasses variablen <code>køn</code> så variablen opfattes som en faktor og så
fejlregistreringer slås sammen. I <code>fct_collapse()</code> specificeres,
hvilke gamle kategorier, der skal samles i nye kategorier. Bemærk at <code>køn</code> overskrives i koden ved at kalde den “nye” variabel det samme navn som den gamle variabel.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="Rintro.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Slå kategorier af køn sammen for at rette indtastningsfejl</span></span>
<span id="cb86-2"><a href="Rintro.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="co"># mand samler &quot;mand&quot; og &quot;Mand&quot;, mens kvinde samler</span></span>
<span id="cb86-3"><a href="Rintro.html#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;kvinde&quot; og &quot;KVINDE&quot;</span></span>
<span id="cb86-4"><a href="Rintro.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(køn <span class="ot">=</span> <span class="fu">fct_collapse</span>(køn,</span>
<span id="cb86-5"><a href="Rintro.html#cb86-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">mand =</span> <span class="fu">c</span>(<span class="st">&quot;mand&quot;</span>, <span class="st">&quot;Mand&quot;</span>),</span>
<span id="cb86-6"><a href="Rintro.html#cb86-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">kvinde =</span> <span class="fu">c</span>(<span class="st">&quot;kvinde&quot;</span>, <span class="st">&quot;KVINDE&quot;</span>))) </span></code></pre></div>
<p>Endelig skal vi sikre, at både <code>diab</code> og <code>behandling</code> opfattes af R som
faktorer. Igen bruges <code>mutate()</code> til at omdefinere og funktionen
<code>factor()</code> omkoder variablen til en faktor. Det er ikke nødvendigt selv at
specificere, hvilke kategorier, der findes, men med argumentet <code>levels</code> kan vælge den interne rækkefølgen på kategorierne, og den første kategori opfattes som referencekategorien.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="Rintro.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lav diab til en faktor</span></span>
<span id="cb87-2"><a href="Rintro.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">diab =</span> <span class="fu">factor</span>(diab))</span>
<span id="cb87-3"><a href="Rintro.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Lav behandling til et faktor og brug</span></span>
<span id="cb87-4"><a href="Rintro.html#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co"># kategorien &quot;gammel&quot; som referencekategori</span></span>
<span id="cb87-5"><a href="Rintro.html#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">behandling =</span> <span class="fu">factor</span>(behandling,</span>
<span id="cb87-6"><a href="Rintro.html#cb87-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;gammel&quot;</span>, <span class="st">&quot;ny&quot;</span>)))</span></code></pre></div>
<p>Det hele kan samles til et enkelt kald til <code>mutate()</code>.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="Rintro.html#cb88-1" aria-hidden="true" tabindex="-1"></a>DF <span class="sc">|&gt;</span>                   <span class="co"># Tag datasættet og behold rækker,</span></span>
<span id="cb88-2"><a href="Rintro.html#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(start<span class="sc">&gt;</span><span class="dv">0</span>,       <span class="co"># hvor baseline diastolisk er større</span></span>
<span id="cb88-3"><a href="Rintro.html#cb88-3" aria-hidden="true" tabindex="-1"></a>         hojde<span class="sc">&gt;</span><span class="dv">120</span>) <span class="sc">|&gt;</span>  <span class="co"># end 0 og højde er større end 120</span></span>
<span id="cb88-4"><a href="Rintro.html#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> vaegt <span class="sc">/</span> (hojde<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>,    <span class="co"># Lav BMI</span></span>
<span id="cb88-5"><a href="Rintro.html#cb88-5" aria-hidden="true" tabindex="-1"></a>         køn <span class="ot">=</span> <span class="fu">fct_collapse</span>(køn,         <span class="co"># Slå grupper sammen</span></span>
<span id="cb88-6"><a href="Rintro.html#cb88-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mand =</span> <span class="fu">c</span>(<span class="st">&quot;mand&quot;</span>, <span class="st">&quot;Mand&quot;</span>),</span>
<span id="cb88-7"><a href="Rintro.html#cb88-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">kvinde =</span> <span class="fu">c</span>(<span class="st">&quot;kvinde&quot;</span>, <span class="st">&quot;KVINDE&quot;</span>)),</span>
<span id="cb88-8"><a href="Rintro.html#cb88-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">behandling =</span> <span class="fu">factor</span>(behandling, <span class="co"># Lav til faktor</span></span>
<span id="cb88-9"><a href="Rintro.html#cb88-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;gammel&quot;</span>, <span class="st">&quot;ny&quot;</span>)),</span>
<span id="cb88-10"><a href="Rintro.html#cb88-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">diab =</span> <span class="fu">factor</span>(diab)             <span class="co"># Lav til faktor</span></span>
<span id="cb88-11"><a href="Rintro.html#cb88-11" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<pre><code>##   alder    køn diab behandling hojde vaegt start 4 uger      bmi
## 1    70   mand  nej         ny   177    96    99     81 30.64254
## 2    52   mand  nej     gammel   180    97   104     93 29.93827
## 3    46   mand  nej     gammel   187    93    94     86 26.59498
## 4    47   mand  nej     gammel   185    93    97     91 27.17312
## 5    74 kvinde  nej     gammel   162    66   103     90 25.14861
## 6    68 kvinde  nej     gammel   161    59   103     90 22.76147
## 7    56 kvinde   ja         ny   168    69   102     81 24.44728
## 8    59 kvinde   ja     gammel   167    70    96     86 25.09950</code></pre>
<p>Endelig kan vi fjerne de variable, som ikke længere er
nødvendige. <code>select()</code> vælger søjler i datasættet, som skal gemmes,
men med minus foran udvælgelsen angives de søjler, der skal fjernes.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="Rintro.html#cb90-1" aria-hidden="true" tabindex="-1"></a>DF <span class="sc">|&gt;</span>                   <span class="co"># Tag datasættet og behold rækker,</span></span>
<span id="cb90-2"><a href="Rintro.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(start<span class="sc">&gt;</span><span class="dv">0</span>,       <span class="co"># hvor baseline diastolisk er større</span></span>
<span id="cb90-3"><a href="Rintro.html#cb90-3" aria-hidden="true" tabindex="-1"></a>         hojde<span class="sc">&gt;</span><span class="dv">120</span>) <span class="sc">|&gt;</span>  <span class="co"># end 0 og højde er større end 120</span></span>
<span id="cb90-4"><a href="Rintro.html#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> vaegt <span class="sc">/</span> (hojde<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>,    <span class="co"># Lav BMI</span></span>
<span id="cb90-5"><a href="Rintro.html#cb90-5" aria-hidden="true" tabindex="-1"></a>         køn <span class="ot">=</span> <span class="fu">fct_collapse</span>(køn,         <span class="co"># Slå grupper sammen</span></span>
<span id="cb90-6"><a href="Rintro.html#cb90-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mand =</span> <span class="fu">c</span>(<span class="st">&quot;mand&quot;</span>, <span class="st">&quot;Mand&quot;</span>),</span>
<span id="cb90-7"><a href="Rintro.html#cb90-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">kvinde =</span> <span class="fu">c</span>(<span class="st">&quot;kvinde&quot;</span>, <span class="st">&quot;KVINDE&quot;</span>)),</span>
<span id="cb90-8"><a href="Rintro.html#cb90-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">behandling =</span> <span class="fu">factor</span>(behandling, <span class="co"># Lav til faktor</span></span>
<span id="cb90-9"><a href="Rintro.html#cb90-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;gammel&quot;</span>, <span class="st">&quot;ny&quot;</span>)),</span>
<span id="cb90-10"><a href="Rintro.html#cb90-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">diab =</span> <span class="fu">factor</span>(diab)             <span class="co"># Lav til faktor</span></span>
<span id="cb90-11"><a href="Rintro.html#cb90-11" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span>                             <span class="co"># Og så </span></span>
<span id="cb90-12"><a href="Rintro.html#cb90-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(hojde, vaegt))               <span class="co"># Fjern hojde/vaegt</span></span></code></pre></div>
<pre><code>##   alder    køn diab behandling start 4 uger      bmi
## 1    70   mand  nej         ny    99     81 30.64254
## 2    52   mand  nej     gammel   104     93 29.93827
## 3    46   mand  nej     gammel    94     86 26.59498
## 4    47   mand  nej     gammel    97     91 27.17312
## 5    74 kvinde  nej     gammel   103     90 25.14861
## 6    68 kvinde  nej     gammel   103     90 22.76147
## 7    56 kvinde   ja         ny   102     81 24.44728
## 8    59 kvinde   ja     gammel    96     86 25.09950</code></pre>
<p>Det oprensede datasæt er stadig ikke gemt. Det gøres ved at gemme resultatet af hele processen i et nyt objekt <code>rettede_data</code>, som så kan bruges til de efterfølgende analyser.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="Rintro.html#cb92-1" aria-hidden="true" tabindex="-1"></a>rettede_data <span class="ot">&lt;-</span></span>
<span id="cb92-2"><a href="Rintro.html#cb92-2" aria-hidden="true" tabindex="-1"></a>DF <span class="sc">|&gt;</span>                   <span class="co"># Tag datasættet og behold rækker,</span></span>
<span id="cb92-3"><a href="Rintro.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(start<span class="sc">&gt;</span><span class="dv">0</span>,       <span class="co"># hvor baseline diastolisk er større</span></span>
<span id="cb92-4"><a href="Rintro.html#cb92-4" aria-hidden="true" tabindex="-1"></a>         hojde<span class="sc">&gt;</span><span class="dv">120</span>) <span class="sc">|&gt;</span>  <span class="co"># end 0 og højde er større end 120</span></span>
<span id="cb92-5"><a href="Rintro.html#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> vaegt <span class="sc">/</span> (hojde<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>,    <span class="co"># Lav BMI</span></span>
<span id="cb92-6"><a href="Rintro.html#cb92-6" aria-hidden="true" tabindex="-1"></a>         køn <span class="ot">=</span> <span class="fu">fct_collapse</span>(køn,         <span class="co"># Slå grupper sammen</span></span>
<span id="cb92-7"><a href="Rintro.html#cb92-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mand =</span> <span class="fu">c</span>(<span class="st">&quot;mand&quot;</span>, <span class="st">&quot;Mand&quot;</span>),</span>
<span id="cb92-8"><a href="Rintro.html#cb92-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">kvinde =</span> <span class="fu">c</span>(<span class="st">&quot;kvinde&quot;</span>, <span class="st">&quot;KVINDE&quot;</span>)),</span>
<span id="cb92-9"><a href="Rintro.html#cb92-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">behandling =</span> <span class="fu">factor</span>(behandling, <span class="co"># Lav til faktor</span></span>
<span id="cb92-10"><a href="Rintro.html#cb92-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;gammel&quot;</span>, <span class="st">&quot;ny&quot;</span>)),</span>
<span id="cb92-11"><a href="Rintro.html#cb92-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">diab =</span> <span class="fu">factor</span>(diab)             <span class="co"># Lav til faktor</span></span>
<span id="cb92-12"><a href="Rintro.html#cb92-12" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span>                             <span class="co"># Og så </span></span>
<span id="cb92-13"><a href="Rintro.html#cb92-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(hojde, vaegt))               <span class="co"># Fjern hojde/vaegt</span></span></code></pre></div>
<p><code>tidyverse</code> indeholder to andre nyttige funktioner, <code>summarise()</code> og
<code>group_by()</code>, der henholdsvis bruges til at opsummere data og at splitte
data op i undergrupper for at lave opsummeringer for hver
gruppe. Disse to funktioner introduceres nærmere i kapitel
<a href="#deskstat"><strong>??</strong></a>.</p>
</div>
<div id="opgaver" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> Opgaver<a href="Rintro.html#opgaver" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Brug R som lommeregner til at udregne følgende:</p>
<ol style="list-style-type: upper-alpha">
<li><span class="math inline">\(12\cdot6\)</span></li>
<li><span class="math inline">\(2\cdot(1+3)^2\)</span></li>
<li><span class="math inline">\(\log(20) + \sqrt{13}\)</span> [ log henviser til den naturlige logaritme ]</li>
</ol></li>
<li><p>Definer følgende to vektorer</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="Rintro.html#cb93-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">2</span>)</span>
<span id="cb93-2"><a href="Rintro.html#cb93-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)</span></code></pre></div>
<p>Overvej — uden at køre linjerne — hvad følgende kommandoer giver</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="Rintro.html#cb94-1" aria-hidden="true" tabindex="-1"></a>x<span class="dv">-2</span></span>
<span id="cb94-2"><a href="Rintro.html#cb94-2" aria-hidden="true" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span>    </span>
<span id="cb94-3"><a href="Rintro.html#cb94-3" aria-hidden="true" tabindex="-1"></a>x<span class="sc">+</span>y</span>
<span id="cb94-4"><a href="Rintro.html#cb94-4" aria-hidden="true" tabindex="-1"></a>x<span class="sc">*</span>y</span>
<span id="cb94-5"><a href="Rintro.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span>
<span id="cb94-6"><a href="Rintro.html#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)</span>
<span id="cb94-7"><a href="Rintro.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span>
<span id="cb94-8"><a href="Rintro.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<p>Brug R til at checke, om dine overvejelser var korrekte.</p></li>
<li><p>Fødselsvægten (i gram), fostrets alder (i uger) og køn for 8 nyfødte er vist i tabellen nedenfor.</p>
<table>
<thead>
<tr class="header">
<th>Køn</th>
<th>Alder (uge)</th>
<th>Fødselsvægt (g)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dreng</td>
<td>37</td>
<td>2628</td>
</tr>
<tr class="even">
<td>dreng</td>
<td>38</td>
<td>3176</td>
</tr>
<tr class="odd">
<td>dreng</td>
<td>40</td>
<td>3421</td>
</tr>
<tr class="even">
<td>dreng</td>
<td>38</td>
<td>2975</td>
</tr>
<tr class="odd">
<td>dreng</td>
<td>40</td>
<td>3317</td>
</tr>
<tr class="even">
<td>pige</td>
<td>36</td>
<td>2729</td>
</tr>
<tr class="odd">
<td>pige</td>
<td>40</td>
<td>2935</td>
</tr>
<tr class="even">
<td>pige</td>
<td>38</td>
<td>2754</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: upper-alpha">
<li><p>Lav en vektor <code>vaegt</code>, der indeholder de 8 vægtmålinger. Brug for eksempel funktionen <code>c()</code>.</p></li>
<li><p>Lav to nye vektorer <code>alder</code> og <code>kon</code>, der indeholder henholdsvis aldersmålingerne og informationen om køn.</p></li>
<li><p>Udregn en ny vektor, <code>kg</code>, der indeholder de afrundede vægtmålinger i kg. Brug funktionen <code>round()</code> til at afrunde fødselsvægten til nærmeste 100 gram.
Brug hjælpesiden til <code>round()</code> til at finde ud af, hvordan man vælger antallet af betydende cifre, når man afrunder.<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a></p></li>
<li><p>De nyfødte piger svarer til måling nummer 6, 7 og 8. Brug indicering af vektoren <code>vaegt</code> til at udtrække fødselsvægten for observation 6, 7 og 8.
Hvad er den gennemsnitlige fødselsvægt for de tre piger?</p>
<p>Det er sjældent, at man kender de specifikke observationsnumre, man vil udtrække.
Brug i stedet oplysningerne fra vektoren <code>kon</code> til at udtrække fødselsvægten for pigerne.</p></li>
<li><p>Erstat det 4. element af <code>vaegt</code> i <code>DF</code> fra 2975 til værdien 3075.</p>
<p>Udregn den gennemsnitlige fødselsvægt for alle 8 personer i <code>DF</code>.<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a></p></li>
<li><p>Lav en data frame, <code>DF</code>, der indeholder de 4 variable <code>kon</code>, <code>alder</code>, <code>vaegt</code> og <code>kg</code>. Prøv at køre kommandoen</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="Rintro.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(DF)</span></code></pre></div>
<p>Hvad viser den?</p>
<p>Se hjælpesiden til <code>head()</code> for at se, hvordan man ændrer antallet af linjer, der vises.<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></p>
<p>Prøv at køre kommandoen</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="Rintro.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(DF)</span></code></pre></div>
<p>Hvad viser den? Hvorfor er formatet forskelligt for <code>vaegt</code> og <code>kon</code>?</p></li>
</ol></li>
<li><p>Datasættet <code>morbarn</code> fra pakken <code>stat4med</code> indeholder oplysninger om en tilfældig stikprøve på 400 førstegangsfødende mødre fra det såkaldte Mor-Barn studie XXX (indsæt ref), der følger levendefødte børn fra terminsugerne 37-42, og hvor moderen ikke drak under graviditeten. Datasættet indeholder seks registreringer om hver moder: alder (i år), ryger (ja/nej), kaffedrikker (ja/nej), uge (gestationsalder ved fødslen i uger), vaegt (barnets vægt i gram) og længde (barnets længde i cm).</p>
<p>Data kan indlæses ved at skrive kommandoen</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="Rintro.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;stat4med&quot;</span>)  <span class="co"># Indlæs pakken</span></span>
<span id="cb97-2"><a href="Rintro.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;morbarn&quot;</span>)  <span class="co"># Gør data tilgængelige</span></span></code></pre></div>
<p>De efterfølgende spørgsmål kan med fordel besvares ved brug af funktionerne fra <code>tidyverse</code> pakken.</p>
<ol style="list-style-type: upper-alpha">
<li>Hvad er gennemsnitsalderen for de 400 førstegangsfødende? Hvad er gennemsnitsvægten for de nyfødte?</li>
<li>Lav en ny data frame kaldet <code>deldata</code>, der kun indeholder de mødre, der hverken ryger eller drikker kaffe.<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a></li>
<li>Lav fødselsvægt defineres ofte som børn, der har en fødselsvægt mellem 1500 til 2500 gram. Lav en ny variabel, <code>lavvaegt</code>, der er <code>TRUE</code>, hvis børnene har lav fødselsvægt, og <code>FALSE</code> ellers.</li>
<li>Hvor mange børn har lav fødselsvægt?<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a></li>
</ol></li>
<li><p>Hver gang man starter på et nyt projekt er det en god ide at lave
et bibliotek/en folder på computeren, der indeholder alle data og R
scripts. Det sikrer, at man har data og programmer samlet, og at
man ikke får sammenblandet filer fra forskellige analyser.</p>
<p>Når R starter op starter den typisk i samme bibliotek, og det kan
være nødvendigt at sætte det bibliotek, hvor den skal finde og
gemme filer.</p>
<ol style="list-style-type: upper-alpha">
<li>Brug funktionen <code>getwd()</code> (get working directory) til at se, hvilket bibliotek R leder efter filer i.</li>
<li>Opret et ny bibliotek, <code>testR</code> på computeren. Brug stifinderen til at gøre dette.</li>
<li>Sæt det nye arbejdsbibliotek til <code>testR</code>. Dette kan gøres i RStudio via menupunktet Session -&gt; Set Working Directory -&gt; Choose Directory. Et alternativ er at bruge funktionen <code>setwd()</code>.</li>
<li>Kør <code>getwd()</code> igen for at checke at det nye arbejdsbibliotek er <code>testR</code>.</li>
</ol></li>
<li><p>Tabeller. Lav en matrix …</p></li>
<li><p>Import af data. CSV? Excel? Ha’ en excel-fil på hjemmesiden. Læs den ind, gem som csv. Prøv at læse ind via …</p></li>
</ol>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>R kan hentes fra <code>www.r-project.org</code>. Fra
hjemmesiden vælges først download (CRAN), derefter en server,
hvorefter R kan hentes og installeres.<a href="Rintro.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>RStudios hjemmeside er
<code>www.rstudio.com</code> og herfra kan man downloade RStudio.<a href="Rintro.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Kommandoerne i
RStudios editor kan gemmes som dokumentation for de
analyser, der er lavet. Filer med kommandoer til R har typisk
efternavnet <code>.R</code> eller <code>.r</code>, men det er bare helt almindelige
tekstfiler. Det anbefales at skrive alle
kommandoerne i editoren, da det sikrer, at det er muligt at
reproducere og genskabe alle resultater.<a href="Rintro.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Opgave XXX viser, hvordan arbejdsbiblioteket skiftes.<a href="Rintro.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>Skrives navnet på en
funktion <em>uden</em> at angive parenteser så vises funktionens
kildekode. Det gør det muligt direkte at se, hvad funktionerne i R
faktisk gør.<a href="Rintro.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p><code>install.packages()</code> svarer til, at
installere en lampe i et hus — det skal kun gøres en
gang. <code>library()</code> svarer til at tænde på kontakten, og det skal man
huske at gøre, hver gang man starter et program og har “brug for
lyset”.<a href="Rintro.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Foran resultatet står et <code>[1]</code>, som vi kan ignorere indtil
videre. Forklaringen kommer i afsnit <a href="Rintro.html#R-vector">2.4</a>.<a href="Rintro.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>
Pilen består af to tegn: <code>&lt;</code> (mindre end) og <code>-</code> (minus). Pilen <code>&lt;-</code>
kan opfattes som om, at man sender resultatet over i det
valgte objekt.<a href="Rintro.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>På samme vis er funktionen <code>log()</code> ikke det samme som funktionen <code>LOG()</code> eller <code>Log()</code>.<a href="Rintro.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>Desuden er internettet er en
rig ressource til at søge efter hjælp til R. Der er tusindevis af sider med
hjælp, eksempler, forklaringer og videoer.<a href="Rintro.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>Body-mass index er
defineret som en persons vægt (målt i kg) delt med højde (målt i meter) kvadreret.<a href="Rintro.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>Hvis længden af den korte
vektor <em>ikke</em> går op i længden af den lange vektor så bliver den korte
vektor stadig gentaget indtil den matcher længden af den lange, men en
advarsel skrives på skærmen.<a href="Rintro.html#fnref12" class="footnote-back">↩︎</a></p></li>
<li id="fn13"><p><code>DF$v4</code> læses som “variabel <code>v4</code> fra <code>DF</code>”, og
den adskiller sig fra <code>DF2$v4</code>, der er en helt anden vektor (dog med
samme navn), og som findes i data framen <code>DF2</code>.<a href="Rintro.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>Alternativt skal længden på den korte
vektor gå op i længden på de øvrige variable i data framen, så den kan
gentages til at have samme længde.<a href="Rintro.html#fnref14" class="footnote-back">↩︎</a></p></li>
<li id="fn15"><p>Data frames og
matricer er begge rektangulære strukturer, men matricer kan kun
indeholde tal. I en matrix er der til gengæld ikke nogen typeforskel
på rækker og søjler.<a href="Rintro.html#fnref15" class="footnote-back">↩︎</a></p></li>
<li id="fn16"><p>Med argumentet <code>byrow=TRUE</code> til <code>matrix()</code> fyldes matricen
op rækkevis i stedet for søjlevis.<a href="Rintro.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p>Filen
<code>forsøgsdata.xlsx</code> antages at ligge i samme bibliotek som R
sessionen. Ellers skal den fulde sti til filen skrives. Filen <code>forsøgsdata.xlsx</code> kan hentes fra bogens hjemmeside.<a href="Rintro.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>En CSV-fil (comma-separated values) er en almindelig
tekstfil, hvor søjlerne i datasættet er adskilt med comma, semikolon
eller mellemrum. En fil med dette indhold findes på bogens
hjemmeside.<a href="Rintro.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>Dette er
specielt vigtigt for at kunne reproducere resultaterne. Hvis ikke de
præcise argumenter til indlæsning bliver gemt, så risikerer det, at
filen senere indlæses på en anden måde, hvilket kan give andre resultater. <a href="Rintro.html#fnref19" class="footnote-back">↩︎</a></p></li>
<li id="fn20"><p><code>tidyverse</code> bruger en udvidet data
frame kaldet <code>tibbles</code> i <code>tidyverse</code>, men den fungerer
som en data frame. Udtales “tibbles” lidt hurtigt lyder det næsten
ligesom “tables”.<a href="Rintro.html#fnref20" class="footnote-back">↩︎</a></p></li>
<li id="fn21"><p><code>|&gt;</code> består af to tegn: “lodret streg” og “større end” og kaldes en “pipe”,
da den som et rør fører resultatet fra en funktion videre til den
næste funktion.<a href="Rintro.html#fnref21" class="footnote-back">↩︎</a></p></li>
<li id="fn22"><p>Datasættet
findes også i pakken stat4med og hedder XXX.<a href="Rintro.html#fnref22" class="footnote-back">↩︎</a></p></li>
<li id="fn23"><p>Fif: <code>round()</code> afrunder betydende cifre efter kommaet. For at afrunde til nærmeste 100 g kan det derfor være nødvendigt først at dividere den oprindelig vægt, dernæst afrunde og så gange op igen.<a href="Rintro.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p>Brug enten <code>$</code> eller
indicering til at trække den relevante variabel ud af data framen.<a href="Rintro.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p><code>head()</code> er særlig nyttig,
hvis man vil have et hurtigt overblik over indholdet i en data frame eller en vektor.<a href="Rintro.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p>Husk, at man skal bruge to lighedstegn, når man checker om en variabel er lig en bestemt værdi.<a href="Rintro.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>Man kan bruge funktionen <code>sum()</code> til at tælle op, hvor ofte <code>lavvaegt</code> er <code>TRUE</code>.<a href="Rintro.html#fnref27" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="referencer.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/80-Rintro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
